## üéÆ Description

**Sprite Swapper** is an automated tool designed to replace sprites in the GBA games **Buu's Fury** and **Legacy Of Goku 2**.  
It supports **only** **.bmp** files and reinserts them into the game's ROM.

## üíª Usage

1.  **Image Extraction**: Use the **Image Extractor** software to extract **.bmp** sprite files you want to modify. This process will also generate an **infos.json** file containing essential information about the location and characteristics of the extracted images.

2.  **Download the Software**: Download the **software** by clicking on the `Code` > `Download ZIP` button on the repository page.

3.  **Placing the `.gba` ROM**: In the folder named `source_rom`, create a subfolder for each game (`buusfury` or `log2`). Place the corresponding original ROM in the subfolder and rename it to **buusfury.gba** or **log2.gba**, depending on the game. **It is crucial to use an original ROM to preserve its integrity.**

    ```
    Sprite Swapper/
    ‚îú‚îÄ‚îÄ source_rom/
    ‚îÇ   ‚îú‚îÄ‚îÄ buusfury/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ buusfury.gba
    ‚îÇ   ‚îî‚îÄ‚îÄ log2/
    ‚îÇ       ‚îî‚îÄ‚îÄ log2.gba
    ‚îî‚îÄ‚îÄ ... (other software files)
    ```

    > ‚ÑπÔ∏è **Note**: If you change the ROM, you must regenerate the **JSON** with **Image Extractor**.

4.  **Placing the `.json` File**: Copy the **infos.json** file generated by **Image Extractor** into the folder named `source_infos/log2` or `source_infos/buusfury`. Then rename the file to **infos_log2.json** if you‚Äôre working on Legacy Of Goku 2, or **infos_buusfury.json** for Buu's Fury.

    ```
    Sprite Swapper/
    ‚îú‚îÄ‚îÄ source_infos/
    ‚îÇ   ‚îú‚îÄ‚îÄ infos_buusfury.json
    ‚îÇ   ‚îî‚îÄ‚îÄ infos_log2.json
    ‚îî‚îÄ‚îÄ ...
    ```

5.  **Modifying `.bmp` Images**: The extracted **.bmp** files can be edited with image editing software such as **Photoshop**, **GIMP**, or **Paint.NET**.
    > ‚ö†Ô∏è **Mandatory Rules**:
    >
    > -   **Indexed Mode**: Make sure to keep the image‚Äôs color mode indexed.
    > -   **Color Palette**: Use **only** the colors present in the ROM's original palette. Using new colors will cause graphical errors in the game.
    > -   **File Naming**: The modified **.bmp** files must be named using **the hexadecimal offset of the sprite to replace**, as shown in the names of the files extracted by Image Extractor (e.g., **`387ba4.bmp`**, which is Vegeta's idle sprite).

6.  **Placing Modified `.bmp` Images**: Place all modified **.bmp** files into a folder named `source_images` at the root of the **Sprite Swapper** folder. This folder is shared between the two games.

    ```
    Sprite Swapper/
    ‚îú‚îÄ‚îÄ source_images/
    ‚îÇ   ‚îú‚îÄ‚îÄ 387ba4.bmp
    ‚îÇ   ‚îú‚îÄ‚îÄ ... (other modified bmp files)
    ‚îî‚îÄ‚îÄ ...
    ```

7.  **Running the Software**:
    * Double-click the `Sprite Swapper.exe` file to launch the program.
    * The software will display a console menu allowing you to choose the ROM to modify (**LOG2** or **BUUSFURY**). Use the **arrow keys (up and down)** to select your choice and press **Enter** to confirm.
    * The software will then go through the **.bmp** files in the `source_images` folder, compress them using the `jcalg1.exe` tool (included in the `lib` folder), and automatically reinsert them into a copy of the ROM.
    * During the process, the software will display detailed information in the console, such as processed files, offsets, and operation statuses.
    * A modified copy of the ROM will be generated in a new timestamped folder located in the `export/<game_name>/` folder. The modified ROM file name will also include a timestamp.

    > ‚ÑπÔ∏è **Note**: If a `.SAV` (save file) with the same name as the source ROM (e.g., `log2.SAV` or `buusfury.SAV`) is present in the `source_rom/<game_name>/` folder, it will automatically be copied into the export folder and renamed accordingly to match the modified ROM, making it easier to test inserted sprites.

## üß† **Main Advantage**

This workflow ensures that the **source ROM remains intact**. You can run the program as many times as needed, test different modifications, and always revert to the original ROM. This prevents accidental corruption of the original ROM and maximizes flexibility during repeated modifications. Additionally, using timestamped export folders preserves the history of your changes.

## Compatible ROMs

**All** versions of LOG2 and Buu's Fury are compatible, including leaked prototypes.

## ‚ÑπÔ∏è Known Issues as of 03/18/25

- Inserting a 64x64 sprite into a slot that isn't originally 64x64 will cause the game to crash.
- It‚Äôs impossible to work on both LOG2 and Buu's Fury ROMs simultaneously, as the `source_images` folder is shared between both ROMs. This may be changed later, but it's not urgent.

---

### üñºÔ∏è Image Extractor

The **Image Extractor** is a program that extracts images from GBA ROMs.

- **Required Files**:
  - A GBA ROM (`.gba`) in the `Sources` folder.

- **Features**:
  - Extraction of compressed images from the ROM.
  - Manual extraction of uncompressed images.
  - Generation of `.bmp` files and an `infos.json` file containing metadata about the extracted images.
  - Supports **LOG2** and **Buu's Fury** ROMs with their specific palettes.

- **Advanced Usage**:
  - JSON creation.
  - Image decompression.
  - The program allows analysis of specific ROM offsets to manually extract images.
  - Create `.bmp` files without CRC32 constraints (useful for LOG2 if you want to modify tilesets).

---

### ‚ö†Ô∏è Not all images are in the correct format ‚Äî you‚Äôll have to visually find the right ones.

Only the international version of LOG2 is almost fully sorted. The Buu's Fury ROM will be sorted soon.

---

### üö® Known Issues with Image Extractor

- If the ROM is not compatible with the provided palettes, extracted images may have incorrect colors.
- Manual image extraction requires knowledge of offsets and image dimensions.

## üìú Credits

**Sprite Swapper** is a software developed by **Ghost**.

**Sprite Swapper** is based on the work of **Fralacticus** ‚Äî without him, this project wouldn‚Äôt exist.

Thanks to **Zhacks** for enabling the insertion of larger sprites than the original ones being replaced.
